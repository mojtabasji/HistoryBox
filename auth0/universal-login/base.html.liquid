<!doctype html>
<html lang="{{ locale }}" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ application.name | escape }} — {{ page.name | default: prompt.name | escape }}</title>

    <!-- Auth0 required hooks -->
    {{ auth0:head }}
    {{ auth0:assets }}

    <!-- Fonts & base styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
      :root {
        --bg: #0b1020;
        --card: #121936;
        --text: #e9ecf1;
        --muted: #aab1c6;
        --accent: #6366f1; /* indigo-500 */
        --accent-600: #4f46e5;
        --danger: #ef4444;
      }
      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        background: radial-gradient(1200px 800px at 70% -10%, #1f2a4b, #0c1228 40%, #070b1a 80%);
        color: var(--text);
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        line-height: 1.5;
      }
      .container {
        min-height: 100%;
        display: grid;
        grid-template-rows: 1fr auto;
      }
      .main {
        display: grid;
        place-items: center;
        padding: 24px;
      }
      .card {
        width: 100%;
        max-width: 440px;
        background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
        backdrop-filter: saturate(120%) blur(14px);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.45);
        overflow: hidden;
      }
      .header {
        padding: 24px 24px 16px 24px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        background: #111827;
        display: grid;
        place-items: center;
        overflow: hidden;
      }
      .logo img { width: 100%; height: 100%; object-fit: cover; }
      .title { font-weight: 600; font-size: 16px; color: var(--text); }
      .subtitle { color: var(--muted); font-size: 13px; margin-top: 2px; }

      .content { padding: 8px 24px 24px; }
      .h1 { font-size: 22px; font-weight: 700; margin: 12px 0 12px; }
      .p { color: var(--muted); font-size: 14px; margin: 0 0 16px; }

      .divider { height: 1px; background: rgba(255,255,255,0.08); margin: 8px 24px; }

      .footer {
        color: var(--muted);
        padding: 16px 24px 32px;
        text-align: center;
        font-size: 12px;
      }
      .support-link { color: var(--muted); text-decoration: underline; }

      .btn {
        display: inline-grid;
        place-items: center;
        width: 100%;
        height: 44px;
        border-radius: 10px;
        background: var(--accent);
        color: #fff;
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: all .15s ease;
      }
      .btn:hover { background: var(--accent-600); }

      .alert { color: var(--danger); font-size: 13px; margin: 8px 0 0; }

      /* Slot where Auth0 renders the widget */
      .widget { margin-top: 8px; }

      .brand { color: var(--muted); font-size: 12px; margin-top: 6px; }
      .brand strong { color: var(--text); }
    </style>
  </head>
  <body>
    <div class="container">
      <main class="main">
        <section class="card" role="main" aria-labelledby="page-title">
          <header class="header">
            <div class="logo">
              {% if tenant.branding.logo_url %}
                <img src="{{ tenant.branding.logo_url }}" alt="{{ tenant.friendly_name | default: tenant.name | escape }}" />
              {% else %}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.343 17.657a8 8 0 1111.314-11.314 8 8 0 01-11.314 11.314zM9 10a3 3 0 116 0 3 3 0 01-6 0z" fill="#6366f1"/></svg>
              {% endif %}
            </div>
            <div>
              <div class="title">{{ application.name }}</div>
              <div class="subtitle">{{ tenant.friendly_name | default: tenant.name }}</div>
            </div>
          </header>

          <div class="divider"></div>
          <div class="content">
            {% comment %} Heading area that each page template will override {% endcomment %}
            {% block heading %}{% endblock %}

            {% if error %}
              <div class="alert" role="alert">{{ error.description | default: error | escape }}</div>
            {% endif %}

            <div class="widget">
              {{ auth0:widget }}
            </div>

            <div class="brand">By continuing you agree to the <strong>{{ tenant.friendly_name | default: tenant.name }}</strong> terms.</div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div>{{ prompt.name | escape }} • {{ page.name | default: "Auth" | escape }}</div>
      </footer>
    </div>

    {{ auth0:foot }}
  </body>
</html>
