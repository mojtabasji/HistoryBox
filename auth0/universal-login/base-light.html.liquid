<!doctype html>
<html lang="{{ locale }}" dir="{% if locale == 'fa' or locale == 'ar' or locale == 'he' or locale == 'ur' %}rtl{% else %}ltr{% endif %}" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ application.name | escape }} — {{ page.name | default: prompt.name | escape }}</title>

    {{ auth0:head }}
    {{ auth0:assets }}

    <!-- Fonts: Inter + Vazirmatn (Persian) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
      :root {
        --bg: #f8fafc;          /* slate-50 */
        --card: #ffffff;        /* white */
        --text: #0f172a;        /* slate-900 */
        --muted: #475569;       /* slate-600 */
        --accent: #6366f1;      /* indigo-500 */
        --accent-600: #4f46e5;  /* indigo-600 */
        --danger: #dc2626;      /* red-600 */
        --border: #e2e8f0;      /* slate-200 */
      }
      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: Vazirmatn, Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        line-height: 1.55;
      }
      .container { min-height: 100%; display: grid; grid-template-rows: 1fr auto; }
      .main { display: grid; place-items: center; padding: 24px; }
      .card {
        width: 100%; max-width: 480px; background: var(--card);
        border: 1px solid var(--border); border-radius: 16px;
        box-shadow: 0 10px 30px rgba(2,6,23,0.06);
        overflow: hidden;
      }
      .header { padding: 24px 24px 12px; display: flex; align-items: center; gap: 12px; }
      .logo { width: 36px; height: 36px; border-radius: 10px; background: #eef2ff; display: grid; place-items: center; overflow: hidden; }
      .logo img { width: 100%; height: 100%; object-fit: cover; }
      .title { font-weight: 700; font-size: 16px; color: var(--text); }
      .subtitle { color: var(--muted); font-size: 13px; margin-top: 2px; }
      .content { padding: 8px 24px 24px; }
      .h1 { font-size: 22px; font-weight: 800; margin: 10px 0 10px; }
      .p { color: var(--muted); font-size: 14px; margin: 0 0 16px; }
      .divider { height: 1px; background: var(--border); margin: 8px 24px; }
      .footer { color: var(--muted); padding: 16px 24px 32px; text-align: center; font-size: 12px; }
      .widget { margin-top: 8px; }
      .brand { color: var(--muted); font-size: 12px; margin-top: 6px; }
      .brand strong { color: var(--text); }

      /* RTL tweaks */
      [dir="rtl"] .header { flex-direction: row-reverse; }
      [dir="rtl"] .title, [dir="rtl"] .subtitle, [dir="rtl"] .h1, [dir="rtl"] .p, [dir="rtl"] .brand { text-align: right; }
    </style>
  </head>
  <body>
    <div class="container">
      <main class="main">
        <section class="card" role="main" aria-labelledby="page-title">
          <header class="header">
            <div class="logo">
              {% if tenant.branding.logo_url %}
                <img src="{{ tenant.branding.logo_url }}" alt="{{ tenant.friendly_name | default: tenant.name | escape }}" />
              {% else %}
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.343 17.657a8 8 0 1111.314-11.314 8 8 0 01-11.314 11.314zM9 10a3 3 0 116 0 3 3 0 01-6 0z" fill="#6366f1"/></svg>
              {% endif %}
            </div>
            <div>
              <div class="title">{{ application.name }}</div>
              <div class="subtitle">{{ tenant.friendly_name | default: tenant.name }}</div>
            </div>
          </header>

          <div class="divider"></div>
          <div class="content">
            {% block heading %}{% endblock %}

            {% if error %}
              <div class="p" role="alert" style="color: var(--danger);">{{ error.description | default: error | escape }}</div>
            {% endif %}

            <div class="widget">
              {{ auth0:widget }}
            </div>

            <div class="brand">با ادامه دادن، با شرایط <strong>{{ tenant.friendly_name | default: tenant.name }}</strong> موافق هستید.</div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div>{{ prompt.name | escape }} • {{ page.name | default: "Auth" | escape }}</div>
      </footer>
    </div>

    {{ auth0:foot }}
  </body>
</html>
